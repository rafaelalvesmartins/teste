var hivepress={getSelector:function(e){return'[data-component="'+e+'"]'},getComponent:function(e){return jQuery(this.getSelector(e))}};!function(e){"use strict";e(document).ready(function(){hivepress.getComponent("link").on("click",function(t){var a=e(this).data("url");0!==a.indexOf("#")&&(window.location.href=a),t.preventDefault()}),hivepress.getComponent("select").each(function(){var t=e(this),a={width:"100%",dropdownAutoWidth:!1,minimumResultsForSearch:20,templateResult:function(t){var a=t.text,r=0;return t.element&&(r=parseInt(e(t.element).data("level")),a=e("<div />").css("padding-left",20*r+"px").text(a)),a}};if(t.data("placeholder")&&(a.placeholder=t.data("placeholder")),"inline"===t.data("style")&&e.extend(a,{containerCssClass:"select2-selection--inline",dropdownCssClass:"select2-dropdown--inline",width:"resolve",dropdownAutoWidth:!0,minimumResultsForSearch:-1}),"icon"===t.data("template")){var r=function(e){var t=e.text;return e.id&&(t='<i class="fas fa-fw fa-'+e.id+'"></i> '+e.text),t};e.extend(a,{templateResult:r,templateSelection:r,escapeMarkup:function(e){return e}})}t.data("source")&&e.extend(a,{minimumInputLength:3,ajax:{url:t.data("source"),dataType:"json",delay:250,cache:!0,data:function(e){return{search:e.term,context:"list",_wpnonce:hivepressCoreData.apiNonce}},processResults:function(e){var t=[];return e&&e.hasOwnProperty("data")&&(t=e.data),{results:t}}}}),t.data("input")&&e.extend(a,{tags:!0,tokenSeparators:[","]}),t.select2(a)});var t=new DateFormatter;if(flatpickr.l10ns.hasOwnProperty(hivepressCoreData.language)){var a=flatpickr.l10ns[hivepressCoreData.language];flatpickr.localize(a),t=new DateFormatter({dateSettings:{days:a.weekdays.longhand,daysShort:a.weekdays.shorthand,months:a.months.longhand,monthsShort:a.months.shorthand,meridiem:a.amPM}})}hivepress.getComponent("date").each(function(){var a=e(this),r={altInput:!0,dateFormat:"Y-m-d",altFormat:"Y-m-d",defaultHour:0};if(a.data("format")&&(r.dateFormat=a.data("format")),a.data("display-format")&&(r.altFormat=a.data("display-format")),a.data("min-date")&&(r.minDate=a.data("min-date")),a.data("max-date")&&(r.maxDate=a.data("max-date")),a.data("time")&&(r.enableTime=!0),a.data("mode")&&(r.mode=a.data("mode"),"range"===a.data("mode"))){var n=a.parent().find('input[type="hidden"]').not(a);e.extend(r,{defaultDate:[n.eq(0).val(),n.eq(1).val()],errorHandler:function(e){},onChange:function(e){var a=e.map(function(e){return t.formatDate(e,r.dateFormat)});2===a.length&&(n.eq(0).val(a[0]),n.eq(1).val(a[1]))}})}e.extend(r,{time_24hr:-1===r.altFormat.indexOf("a")&&-1===r.altFormat.indexOf("A"),parseDate:function(e){return t.parseDate(e,r.dateFormat)},formatDate:function(e,a){return t.formatDate(e,a)}}),a.flatpickr(r)}),hivepress.getComponent("file-upload").each(function(){var t=e(this),a=t.closest("form"),r=a.find(":submit"),n=t.closest("label"),o=n.find("button").first(),d=n.parent().find(hivepress.getSelector("messages")).first(),s=n.parent().children("div").first();a.data("model")||(a=t.closest("table")),t.fileupload({url:t.data("url"),dataType:"json",paramName:"file",formData:{parent_model:a.data("model"),parent_field:t.data("name"),parent:a.data("id"),render:!0,_wpnonce:hivepressCoreData.apiNonce},start:function(){t.prop("disabled",!0),o.prop("disabled",!0),o.attr("data-state","loading"),r.length&&(r.prop("disabled",!0),r.attr("data-state","loading")),d.hide().html("")},stop:function(){t.prop("disabled",!1),o.prop("disabled",!1),o.attr("data-state",""),r.length&&(r.prop("disabled",!1),r.attr("data-state",""))},always:function(a,r){var n=r.jqXHR.responseJSON;n.hasOwnProperty("data")?t.prop("multiple")?s.append(n.data.html):s.html(n.data.html):n.hasOwnProperty("error")&&(n.error.hasOwnProperty("errors")?e.each(n.error.errors,function(e,t){d.append("<div>"+t.message+"</div>")}):n.error.hasOwnProperty("message")&&d.html("<div>"+n.error.message+"</div>"),d.is(":empty")||d.show())}})}),e(document).on("click",hivepress.getSelector("file-delete"),function(t){var a=e(this).parent();e.ajax({url:e(this).data("url"),method:"DELETE",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",hivepressCoreData.apiNonce)}}),a.remove(),t.preventDefault()}),hivepress.getComponent("sortable").each(function(){var t=e(this);t.sortable({stop:function(){t.children().length>1&&t.children().each(function(t){e.ajax({url:e(this).data("url"),method:"POST",data:{sort_order:t},beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",hivepressCoreData.apiNonce)}})})}})})})}(jQuery);
